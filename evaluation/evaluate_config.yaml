# SPDX-FileCopyrightText: Copyright (c) 1993-2025 NVIDIA CORPORATION & AFFILIATES. All rights reserved.
# SPDX-License-Identifier: Apache-2.0

output_dir: "./results"

model: "Qwen/Qwen2-7B-Instruct"
dataset: "ruler"                                  # see DATASET_REGISTRY in evaluate_registry.py
data_dir: "4096"                                  # Subdirectory of the dataset (if applicable) else leave "null"

press_name: "snapkv"                              # see PRESS_REGISTRY in evaluate_registry.py
compression_ratio: 0.7                            # Compression ratio for the press (0.0 to 1.0)
key_channel_compression_ratio: null               # For ThinKPress and ComposedPress (0.0 to 1.0)
threshold: null                                   # For DMSPress

# QUBO parameters for SnapKVPress
qubo_ratio: 0.1  # Set to > 0 to enable QUBO
similarity_threshold: 0.85
lambda_penalty: 2.0
lagrange_multiplier: 10.0
qubo_solver_method: "parallel_annealing"
qubo_num_iterations: 100
qubo_initial_temp: 10.0
qubo_cooling_rate: 0.95
qubo_num_chains: 20

fraction: 0.01                                    # Fraction of dataset to evaluate (0.0 to 1.0), for quick testing (set to 0.01 for debug)
max_new_tokens: null                              # Maximum new tokens to generate (null = use dataset default)
max_context_length: null                          # Maximum context length (null = use model maximum)
query_aware: false                                # Whether to include question in context for query-aware compression
needle_depth: null                                # Depth (int or list of ints) percentage of the needle in the haystack (0 to 100), only for needle_in_haystack dataset

device: "cuda:0" # Device to use (null = auto-detect, "cuda:0", "cpu", etc.)
fp8: false    # Whether to use FP8 quantization (FineGrainedFP8Config() from transformers)

# You can add any model kwargs here.
model_kwargs:
  attn_implementation: null  
  dtype: "auto"
  
